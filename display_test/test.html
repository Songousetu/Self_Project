<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <script type="text/javascript" src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- 引入 echarts.js -->
    <script src="echarts.common.min.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="main" style="width: 1000px;height:600px;margin:30px auto;"></div>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据
        myChart.setOption({
            title: {
                text: '性别比例'
            },
            series: [{
                name: '性别比例',
                type: 'pie',
                radius:'80%',
                //roseType: 'angle',
                data: []
            }],
        });
        function check(){
            $.ajax({
                type:"GET",
                url:"./function.php?type=pie",
                dataType:"json",
                success:function(data){
                    // 填入数据
                    myChart.setOption({
                        series: [{
                             data: [
                                {
                                    value:data.man,
                                    name:"男性",
                                    itemStyle: {
                                        normal: {
                                            color: '#1ABC9C'
                                        }
                                    }
                                },
                                {
                                    value:data.woman,
                                    name:"女性",
                                    itemStyle: {
                                        normal: {
                                            color: '#E74C3C'
                                        }
                                    }
                                }
                            ]
                        }]
                    });
                },
                error:function(res){
                    alert('error:'+res.status);
                }
            });
    }
    window.setInterval(check, 100); //每0.1秒执行一次
    </script>
</body>
</html>